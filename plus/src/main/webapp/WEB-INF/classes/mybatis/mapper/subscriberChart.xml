<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper
	namespace="com.fa.plus.admin.mapper.SubscriberChartMapper">
	<select id="dayOfWMonthSubscriberCount" parameterType="String" resultType="map">
		 SELECT
        TO_CHAR(regdate, 'YYYY-MM') AS month,
        COUNT(*) AS member_count,
        COUNT(DECODE(TO_CHAR(regdate, 'MM'), '01', 1, NULL)) AS "1월",
        COUNT(DECODE(TO_CHAR(regdate, 'MM'), '02', 1, NULL)) AS "2월",
        COUNT(DECODE(TO_CHAR(regdate, 'MM'), '03', 1, NULL)) AS "3월",
        COUNT(DECODE(TO_CHAR(regdate, 'MM'), '04', 1, NULL)) AS "4월",
        COUNT(DECODE(TO_CHAR(regdate, 'MM'), '05', 1, NULL)) AS "5월",
        COUNT(DECODE(TO_CHAR(regdate, 'MM'), '06', 1, NULL)) AS "6월",
        COUNT(DECODE(TO_CHAR(regdate, 'MM'), '07', 1, NULL)) AS "7월",
        COUNT(DECODE(TO_CHAR(regdate, 'MM'), '08', 1, NULL)) AS "8월",
        COUNT(DECODE(TO_CHAR(regdate, 'MM'), '09', 1, NULL)) AS "9월",
        COUNT(DECODE(TO_CHAR(regdate, 'MM'), '10', 1, NULL)) AS "10월",
        COUNT(DECODE(TO_CHAR(regdate, 'MM'), '11', 1, NULL)) AS "11월",
        COUNT(DECODE(TO_CHAR(regdate, 'MM'), '12', 1, NULL)) AS "12월",
        COUNT(*) AS total
    FROM
        member1
    GROUP BY
        TO_CHAR(regdate, 'YYYY-MM')
    ORDER BY
        month desc


	</select>
</mapper>